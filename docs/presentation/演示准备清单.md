# 答辩演示准备清单

## 环境准备

### 1. GoCache服务器

- [ ] 编译最新版本：`go build -o gocache`
- [ ] 准备配置文件：`gocache.conf`
- [ ] 确认端口16379未被占用
- [ ] 测试启动：`./gocache -c gocache.conf`

### 2. redis-cli客户端

- [ ] 安装redis-cli：`brew install redis` 或 `apt-get install redis-tools`
- [ ] 测试连接：`redis-cli -p 16379`
- [ ] 测试认证：`AUTH yourpassword`

### 3. 性能测试环境

- [ ] 确认测试路径：`/Users/wangbo/gocache/test/e2e/performance/`
- [ ] 测试压测命令：`go test ./test/e2e/performance -bench=BenchmarkQPS -benchmem -benchtime=3s`
- [ ] 预运行一次，确保能正常执行

### 4. 持久化演示准备

- [ ] 准备AOF文件查看工具：`cat appendonly.aof`
- [ ] 准备RDB文件查看工具：`ls -lh dump.rdb`
- [ ] 确认配置文件中启用了持久化：
  ```conf
  appendonly yes
  appendfilename appendonly.aof
  dbfilename dump.rdb
  ```

---

## 演示脚本

### 演示1：基础命令操作（2分钟）

**准备工作**：
```bash
# 终端1：启动GoCache
cd /Users/wangbo/gocache
./gocache -c gocache.conf

# 终端2：连接redis-cli
redis-cli -p 16379
AUTH yourpassword
```

**演示命令**：
```bash
# String类型 - 设备信任评分
SET device:123 85
GET device:123
INCRBY device:123 5
GET device:123

# Hash类型 - 终端环境参数
HSET device:123 os Windows location Beijing score 90
HGET device:123 score
HGETALL device:123

# TTL管理
EXPIRE device:123 3600
TTL device:123
```

**预期输出**：
- GET device:123 → "85"
- INCRBY device:123 5 → (integer) 90
- GET device:123 → "90"
- HGET device:123 score → "90"
- HGETALL device:123 → 1) "os" 2) "Windows" 3) "location" 4) "Beijing" 5) "score" 6) "90"
- TTL device:123 → (integer) 3600

---

### 演示2：复杂业务场景（3分钟）

**场景1：IP黑名单检查**
```bash
SADD blacklist:ip 192.168.1.200 10.0.0.50
SMEMBERS blacklist:ip
SISMEMBER blacklist:ip 192.168.1.200  # 返回1
SISMEMBER blacklist:ip 192.168.1.201  # 返回0
```

**场景2：用户访问限流**
```bash
INCR user:1001:request_count
EXPIRE user:1001:request_count 60
GET user:1001:request_count
```

**场景3：事务原子操作**
```bash
MULTI
DEL session:old
SET session:new "{user:1001, login:2025-01-28}"
INCR online:count
EXEC
```

**预期输出**：
- SISMEMBER返回1（存在）
- SISMEMBER返回0（不存在）
- 事务EXEC返回数组：(integer) 1, OK, (integer) 1

---

### 演示3：性能压测（2分钟）

**准备工作**：
- 确保GoCache服务器正在运行
- 打开新终端窗口

**演示命令**：
```bash
cd /Users/wangbo/gocache
go test ./test/e2e/performance -bench=BenchmarkQPS_Concurrent -benchmem -benchtime=3s
```

**预期输出**（示例）：
```
BenchmarkQPS_Concurrent-8      300000    450 ns/op
PASS
ok      gocache/test/e2e/performance    2.456s
```

**实时监控**（在redis-cli中）：
```bash
INFO memory  # 查看内存使用
INFO stats   # 查看QPS统计
```

---

### 演示4：持久化功能（2分钟）

**场景1：AOF持久化**
```bash
# 1. 写入数据
SET persistent:key "test-data"
HSET persistent:hash field1 value1

# 2. 查看AOF文件（新终端）
cat appendonly.aof
# 预期看到：*3\r\n$3\r\nSET\r\n...

# 3. 重启服务器（终端1，Ctrl+C停止后重新启动）
./gocache -c gocache.conf

# 4. 验证数据恢复（redis-cli）
GET persistent:key  # 返回 "test-data"
```

**场景2：RDB快照**
```bash
# 1. 手动触发RDB保存
BGSAVE
# 返回: Background saving started

# 2. 查看RDB文件（新终端）
ls -lh dump.rdb

# 3. 查看保存状态
LASTSAVE  # 返回最后保存时间戳
```

---

## 备用方案

### 演示失败时的应对

**如果GoCache启动失败**：
```bash
# 检查端口占用
lsof -i :16379

# 检查配置文件
cat gocache.conf

# 查看日志
tail -f gocache.log
```

**如果redis-cli连接失败**：
```bash
# 使用telnet测试连接
telnet 127.0.0.1 16379

# 如果telnet也失败，检查GoCache是否正常启动
ps aux | grep gocache
```

**如果性能测试失败**：
```bash
# 检查测试路径
ls test/e2e/performance/

# 运行简单测试
go test ./test/e2e/performance -v

# 如果还是失败，跳过性能测试，使用PPT中的数据说明
```

---

## 可能的问题及应对

### Q1: 为什么不直接用Redis?

**答案**：
1. 这是学习项目，目标是深入理解分布式系统设计
2. GoCache针对零信任场景优化，更轻量、更易维护
3. 生产环境建议使用Redis，GoCache适合学习和定制化场景

### Q2: 性能为什么能接近Redis?

**答案**：
1. 简化实现（未实现所有Redis功能）
2. Go语言性能优势
3. MVP范围（单机，未考虑分布式复杂度）
4. 实际上Redis在生产环境更成熟

### Q3: 生产环境可用性?

**答案**：
1. 当前版本适合学习和中小规模应用
2. 需要完善集群、哨兵等高级功能才能用于大规模生产
3. 建议先在非关键业务试点

### Q4: 下一步最想实现什么?

**答案**：
1. **Pipeline优化**（性能提升最明显，5-10倍）
2. ziplist编码（内存节省30-50%）
3. 集群模式（支持大规模应用）

### Q5: 为什么Pipeline性能这么低?

**答案**：
1. 当前实现有缺陷，未充分优化批处理
2. 已知问题，计划在下一版本优先改进
3. 这是MVP范围的权衡

### Q6: 为什么没有实现ziplist/intset?

**答案**：
1. MVP范围，优先核心功能
2. map和双向链表性能足够
3. 计划在中期版本实现（节省30-50%内存）

---

## 演示时间控制

### 建议时间分配

| 部分 | 时间 | 备注 |
|-----|------|------|
| 开场与背景 | 2-3分钟 | 快速切入痛点 |
| 技术方案设计 | 5-7分钟 | 重点讲权衡 |
| 架构设计 | 5-6分钟 | 高层次概述 |
| 实现成果 | 4-5分钟 | 数据说话 |
| **功能演示** | **7-9分钟** | **现场操作（含持久化）** |
| 总结展望 | 2-3分钟 | 快速收尾 |
| Q&A | 5分钟 | 预留时间 |

**总计**：30-38分钟（平均33分钟）

### 如果时间不够

1. **优先演示**：演示1（基础命令）+ 演示2（复杂场景）
2. **压缩演示**：演示3（性能压测）使用PPT中的数据
3. **跳过演示**：演示4（持久化）口头说明即可

### 如果时间充裕

1. 展示更多命令（List、ZSet等）
2. 展示INFO、SLOWLOG等监控命令
3. 展示主从复制（如果有准备从节点）

---

## 演示前一天检查

### 上午

- [ ] 再次运行所有演示命令，确保正常工作
- [ ] 准备演示终端窗口布局
- [ ] 清理桌面，关闭不必要的应用

### 下午

- [ ] 预演一遍完整流程（计时）
- [ ] 检查PPT是否需要微调
- [ ] 准备备用演示方案

### 晚上

- [ ] 早点休息，保持良好状态
- [ ] 准备答辩材料（PPT、代码、文档）
- [ ] 设置闹钟，确保准时到达

---

## 答辩当天

### 答辩前30分钟

- [ ] 到达答辩地点
- [ ] 连接投影仪/测试设备
- [ ] 启动GoCache服务器
- [ ] 打开所有需要的终端窗口

### 答辩前5分钟

- [ ] 深呼吸，放松心情
- [ ] 检查演示环境是否正常
- [ ] 准备开始演示

### 答辩后

- [ ] 记录评委的问题和建议
- [ ] 整理演示脚本和经验
- [ ] 准备后续改进计划

---

## 祝你答辩成功！
